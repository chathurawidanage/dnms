/**
 * Created by chath on 9/14/2016.
 */
function SDCategoryService() {

//percentiles
    var categories = [
        {
            index: 0,
            code: "Less than -3SD",
            name: "Less than -3SD"
        },
        {
            index: 1,
            code: "Between -2SD to -3SD",
            name: "Between -2SD to -3SD"
        }, {
            index: 2,
            code: "Between -1SD to -2SD",
            name: "Between -1SD to -2SD"
        }, {
            index: 3,
            code: "Between -1SD to +2SD",
            name: "Between -1SD to +2SD"
        }, {
            index: 4,
            code: "More than 2 SD",
            name: "More than +2 SD"
        }];
//[-3,-2,-1,+2]
    var weightGirlsCategory = [[2, 2.4, 2.8, 4.2], [2.7, 3.2, 3.6, 5.5], [3.4, 3.9, 4.5, 6.6], [4, 4.5, 5.2, 7.5], [4.4, 5, 5.7, 8.2], [4.8, 5.4, 6.1, 8.8], [5.1, 5.7, 6.5, 9.3], [5.3, 6, 6.8, 9.8], [5.6, 6.3, 7, 10.2], [5.8, 6.5, 7.3, 10.5], [5.9, 6.7, 7.5, 10.9], [6.1, 6.9, 7.7, 11.2], [6.3, 7, 7.9, 11.5], [6.4, 7.2, 8.1, 11.8], [6.6, 7.4, 8.3, 12.1], [6.7, 7.6, 8.5, 12.4], [6.9, 7.7, 8.7, 12.6], [7, 7.9, 8.9, 12.9], [7.2, 8.1, 9.1, 13.2], [7.3, 8.2, 9.2, 13.5], [7.5, 8.4, 9.4, 13.7], [7.6, 8.6, 9.6, 14], [7.8, 8.7, 9.8, 14.3], [7.9, 8.9, 10, 14.6], [8.1, 9, 10.2, 14.8], [8.2, 9.2, 10.3, 15.1], [8.4, 9.4, 10.5, 15.4], [8.5, 9.5, 10.7, 15.7], [8.6, 9.7, 10.9, 16], [8.8, 9.8, 11.1, 16.2], [8.9, 10, 11.2, 16.5], [9, 10.1, 11.4, 16.8], [9.1, 10.3, 11.6, 17.1], [9.3, 10.4, 11.7, 17.3], [9.4, 10.5, 11.9, 17.6], [9.5, 10.7, 12, 17.9], [9.6, 10.8, 12.2, 18.1], [9.7, 10.9, 12.4, 18.4], [9.8, 11.1, 12.5, 18.7], [9.9, 11.2, 12.7, 19], [10.1, 11.3, 12.8, 19.2], [10.2, 11.5, 13, 19.5], [10.3, 11.6, 13.1, 19.8], [10.4, 11.7, 13.3, 20.1], [10.5, 11.8, 13.4, 20.4], [10.6, 12, 13.6, 20.7], [10.7, 12.1, 13.7, 20.9], [10.8, 12.2, 13.9, 21.2], [10.9, 12.3, 14, 21.5], [11, 12.4, 14.2, 21.8], [11.1, 12.6, 14.3, 22.1], [11.2, 12.7, 14.5, 22.4], [11.3, 12.8, 14.6, 22.6], [11.4, 12.9, 14.8, 22.9], [11.5, 13, 14.9, 23.2], [11.6, 13.2, 15.1, 23.5], [11.7, 13.3, 15.2, 23.8], [11.8, 13.4, 15.3, 24.1], [11.9, 13.5, 15.5, 24.4], [12, 13.6, 15.6, 24.6], [12.1, 13.7, 15.8, 24.9]];
    var weightBoysCategory = [[2.1, 2.5, 2.9, 4.4], [2.9, 3.4, 3.9, 5.8], [3.8, 4.3, 4.9, 7.1], [4.4, 5, 5.7, 8], [4.9, 5.6, 6.2, 8.7], [5.3, 6, 6.7, 9.3], [5.7, 6.4, 7.1, 9.8], [5.9, 6.7, 7.4, 10.3], [6.2, 6.9, 7.7, 10.7], [6.4, 7.1, 8, 11], [6.6, 7.4, 8.2, 11.4], [6.8, 7.6, 8.4, 11.7], [6.9, 7.7, 8.6, 12], [7.1, 7.9, 8.8, 12.3], [7.2, 8.1, 9, 12.6], [7.4, 8.3, 9.2, 12.8], [7.5, 8.4, 9.4, 13.1], [7.7, 8.6, 9.6, 13.4], [7.8, 8.8, 9.8, 13.7], [8, 8.9, 10, 13.9], [8.1, 9.1, 10.1, 14.2], [8.2, 9.2, 10.3, 14.5], [8.4, 9.4, 10.5, 14.7], [8.5, 9.5, 10.7, 15], [8.6, 9.7, 10.8, 15.3], [8.8, 9.8, 11, 15.5], [8.9, 10, 11.2, 15.8], [9, 10.1, 11.3, 16.1], [9.1, 10.2, 11.5, 16.3], [9.2, 10.4, 11.7, 16.6], [9.4, 10.5, 11.8, 16.9], [9.5, 10.7, 12, 17.1], [9.6, 10.8, 12.1, 17.4], [9.7, 10.9, 12.3, 17.6], [9.8, 11, 12.4, 17.8], [9.9, 11.2, 12.6, 18.1], [10, 11.3, 12.7, 18.3], [10.1, 11.4, 12.9, 18.6], [10.2, 11.5, 13, 18.8], [10.3, 11.6, 13.1, 19], [10.4, 11.8, 13.3, 19.3], [10.5, 11.9, 13.4, 19.5], [10.6, 12, 13.6, 19.7], [10.7, 12.1, 13.7, 20], [10.8, 12.2, 13.8, 20.2], [10.9, 12.4, 14, 20.5], [11, 12.5, 14.1, 20.7], [11.1, 12.6, 14.3, 20.9], [11.2, 12.7, 14.4, 21.2], [11.3, 12.8, 14.5, 21.4], [11.4, 12.9, 14.7, 21.7], [11.5, 13.1, 14.8, 21.9], [11.6, 13.2, 15, 22.2], [11.7, 13.3, 15.1, 22.4], [11.8, 13.4, 15.2, 22.7], [11.9, 13.5, 15.4, 22.9], [12, 13.6, 15.5, 23.2], [12.1, 13.7, 15.6, 23.4], [12.2, 13.8, 15.8, 23.7], [12.3, 14, 15.9, 23.9], [12.4, 14.1, 16, 24.2]];
    var heightGirlsCategory = [[43.6, 45.4, 47.3, 52.9], [47.8, 49.8, 51.7, 57.6], [51, 53, 55, 61.1], [53.5, 55.6, 57.7, 64], [55.6, 57.8, 59.9, 66.4], [57.4, 59.6, 61.8, 68.5], [58.9, 61.2, 63.5, 70.3], [60.3, 62.7, 65, 71.9], [61.7, 64, 66.4, 73.5], [62.9, 65.3, 67.7, 75], [64.1, 66.5, 69, 76.4], [65.2, 67.7, 70.3, 77.8], [66.3, 68.9, 71.4, 79.2], [67.3, 70, 72.6, 80.5], [68.3, 71, 73.7, 81.7], [69.3, 72, 74.8, 83], [70.2, 73, 75.8, 84.2], [71.1, 74, 76.8, 85.4], [72, 74.9, 77.8, 86.5], [72.8, 75.8, 78.8, 87.6], [73.7, 76.7, 79.7, 88.7], [74.5, 77.5, 80.6, 89.8], [75.2, 78.4, 81.5, 90.8], [76, 79.2, 82.3, 91.9], [76.7, 80, 83.2, 92.9], [76.8, 80, 83.3, 93.1], [77.5, 80.8, 84.1, 94.1], [78.1, 81.5, 84.9, 95], [78.8, 82.2, 85.7, 96], [79.5, 82.9, 86.4, 96.9], [80.1, 83.6, 87.1, 97.7], [80.7, 84.3, 87.9, 98.6], [81.3, 84.9, 88.6, 99.4], [81.9, 85.6, 89.3, 100.3], [82.5, 86.2, 89.9, 101.1], [83.1, 86.8, 90.6, 101.9], [83.6, 87.4, 91.2, 102.7], [84.2, 88, 91.9, 103.4], [84.7, 88.6, 92.5, 104.2], [85.3, 89.2, 93.1, 105], [85.8, 89.8, 93.8, 105.7], [86.3, 90.4, 94.4, 106.4], [86.8, 90.9, 95, 107.2], [87.4, 91.5, 95.6, 107.9], [87.9, 92, 96.2, 108.6], [88.4, 92.5, 96.7, 109.3], [88.9, 93.1, 97.3, 110], [89.3, 93.6, 97.9, 110.7], [89.8, 94.1, 98.4, 111.3], [90.3, 94.6, 99, 112], [90.7, 95.1, 99.5, 112.7], [91.2, 95.6, 100.1, 113.3], [91.7, 96.1, 100.6, 114], [92.1, 96.6, 101.1, 114.6], [92.6, 97.1, 101.6, 115.2], [93, 97.6, 102.2, 115.9], [93.4, 98.1, 102.7, 116.5], [93.9, 98.5, 103.2, 117.1], [94.3, 99, 103.7, 117.7], [94.7, 99.5, 104.2, 118.3], [95.2, 99.9, 104.7, 118.9]];
    var heightBoysCategory = [[44.2, 46.1, 48, 53.7], [48.9, 50.8, 52.8, 58.6], [52.4, 54.4, 56.4, 62.4], [55.3, 57.3, 59.4, 65.5], [57.6, 59.7, 61.8, 68], [59.6, 61.7, 63.8, 70.1], [61.2, 63.3, 65.5, 71.9], [62.7, 64.8, 67, 73.5], [64, 66.2, 68.4, 75], [65.2, 67.5, 69.7, 76.5], [66.4, 68.7, 71, 77.9], [67.6, 69.9, 72.2, 79.2], [68.6, 71, 73.4, 80.5], [69.6, 72.1, 74.5, 81.8], [70.6, 73.1, 75.6, 83], [71.6, 74.1, 76.6, 84.2], [72.5, 75, 77.6, 85.4], [73.3, 76, 78.6, 86.5], [74.2, 76.9, 79.6, 87.7], [75, 77.7, 80.5, 88.8], [75.8, 78.6, 81.4, 89.8], [76.5, 79.4, 82.3, 90.9], [77.2, 80.2, 83.1, 91.9], [78, 81, 83.9, 92.9], [78, 81, 84.1, 93.2], [78.6, 81.7, 84.9, 94.2], [79.3, 82.5, 85.6, 95.2], [79.9, 83.1, 86.4, 96.1], [80.5, 83.8, 87.1, 97], [81.1, 84.5, 87.8, 97.9], [81.7, 85.1, 88.5, 98.7], [82.3, 85.7, 89.2, 99.6], [82.8, 86.4, 89.9, 100.4], [83.4, 86.9, 90.5, 101.2], [83.9, 87.5, 91.1, 102], [84.4, 88.1, 91.8, 102.7], [85, 88.7, 92.4, 103.5], [85.5, 89.2, 93, 104.2], [86, 89.8, 93.6, 105], [86.5, 90.3, 94.2, 105.7], [87, 90.9, 94.7, 106.4], [87.5, 91.4, 95.3, 107.1], [88, 91.9, 95.9, 107.8], [88.4, 92.4, 96.4, 108.5], [88.9, 93, 97, 109.1], [89.4, 93.5, 97.5, 109.8], [89.8, 94, 98.1, 110.4], [90.3, 94.4, 98.6, 111.1], [90.7, 94.9, 99.1, 111.7], [91.2, 95.4, 99.7, 112.4], [91.6, 95.9, 100.2, 113], [92.1, 96.4, 100.7, 113.6], [92.5, 96.9, 101.2, 114.2], [93, 97.4, 101.7, 114.9], [93.4, 97.8, 102.3, 115.5], [93.9, 98.3, 102.8, 116.1], [94.3, 98.8, 103.3, 116.7], [94.7, 99.3, 103.8, 117.4], [95.2, 99.7, 104.3, 118], [95.6, 100.2, 104.8, 118.6], [96.1, 100.7, 105.3, 119.2]];

    var zeroToTwo = [45, 110];
    var twoToFive = [65, 120];
    var heightWeightZeroToTwoBoys = [[1.9, 2, 2.2, 3], [1.9, 2.1, 2.3, 3.1], [2, 2.2, 2.4, 3.1], [2.1, 2.3, 2.5, 3.2], [2.1, 2.3, 2.5, 3.3], [2.2, 2.4, 2.6, 3.4], [2.3, 2.5, 2.7, 3.6], [2.3, 2.6, 2.8, 3.7], [2.4, 2.6, 2.9, 3.8], [2.5, 2.7, 3, 3.9], [2.6, 2.8, 3, 4], [2.7, 2.9, 3.1, 4.1], [2.7, 3, 3.2, 4.2], [2.8, 3.1, 3.3, 4.4], [2.9, 3.2, 3.5, 4.5], [3, 3.3, 3.6, 4.6], [3.1, 3.4, 3.7, 4.8], [3.2, 3.5, 3.8, 4.9], [3.3, 3.6, 3.9, 5.1], [3.4, 3.7, 4, 5.3], [3.6, 3.8, 4.2, 5.4], [3.7, 4, 4.3, 5.6], [3.8, 4.1, 4.4, 5.8], [3.9, 4.2, 4.6, 5.9], [4, 4.3, 4.7, 6.1], [4.1, 4.5, 4.9, 6.3], [4.3, 4.6, 5, 6.4], [4.4, 4.7, 5.1, 6.6], [4.5, 4.8, 5.3, 6.8], [4.6, 5, 5.4, 7], [4.7, 5.1, 5.5, 7.1], [4.8, 5.2, 5.6, 7.3], [4.9, 5.3, 5.8, 7.4], [5, 5.4, 5.9, 7.6], [5.1, 5.6, 6, 7.7], [5.2, 5.7, 6.1, 7.9], [5.3, 5.8, 6.2, 8], [5.4, 5.9, 6.4, 8.2], [5.5, 6, 6.5, 8.3], [5.6, 6.1, 6.6, 8.5], [5.7, 6.2, 6.7, 8.6], [5.8, 6.3, 6.8, 8.7], [5.9, 6.4, 6.9, 8.9], [6, 6.5, 7, 9], [6.1, 6.6, 7.1, 9.2], [6.2, 6.7, 7.2, 9.3], [6.3, 6.8, 7.3, 9.4], [6.4, 6.9, 7.5, 9.6], [6.5, 7, 7.6, 9.7], [6.6, 7.1, 7.7, 9.8], [6.6, 7.2, 7.8, 10], [6.7, 7.3, 7.9, 10.1], [6.8, 7.4, 8, 10.2], [6.9, 7.5, 8.1, 10.4], [7, 7.6, 8.2, 10.5], [7.1, 7.6, 8.3, 10.6], [7.2, 7.7, 8.4, 10.8], [7.2, 7.8, 8.5, 10.9], [7.3, 7.9, 8.6, 11], [7.4, 8, 8.7, 11.2], [7.5, 8.1, 8.8, 11.3], [7.6, 8.2, 8.8, 11.4], [7.6, 8.3, 8.9, 11.5], [7.7, 8.3, 9, 11.6], [7.8, 8.4, 9.1, 11.7], [7.9, 8.5, 9.2, 11.9], [7.9, 8.6, 9.3, 12], [8, 8.7, 9.4, 12.1], [8.1, 8.7, 9.5, 12.2], [8.2, 8.8, 9.5, 12.3], [8.2, 8.9, 9.6, 12.4], [8.3, 9, 9.7, 12.5], [8.4, 9.1, 9.8, 12.6], [8.5, 9.1, 9.9, 12.7], [8.5, 9.2, 10, 12.8], [8.6, 9.3, 10.1, 13], [8.7, 9.4, 10.2, 13.1], [8.8, 9.5, 10.3, 13.2], [8.9, 9.6, 10.4, 13.3], [9, 9.7, 10.5, 13.5], [9.1, 9.8, 10.6, 13.6], [9.2, 9.9, 10.7, 13.7], [9.3, 10, 10.8, 13.9], [9.4, 10.1, 11, 14], [9.5, 10.2, 11.1, 14.2], [9.6, 10.4, 11.2, 14.3], [9.7, 10.5, 11.3, 14.5], [9.8, 10.6, 11.4, 14.6], [9.9, 10.7, 11.5, 14.7], [10, 10.8, 11.6, 14.9], [10.1, 10.9, 11.8, 15], [10.2, 11, 11.9, 15.1], [10.3, 11.1, 12, 15.3], [10.4, 11.2, 12.1, 15.4], [10.5, 11.3, 12.2, 15.6], [10.6, 11.4, 12.3, 15.7], [10.7, 11.5, 12.4, 15.8], [10.7, 11.6, 12.5, 16], [10.8, 11.7, 12.6, 16.1], [10.9, 11.8, 12.7, 16.3], [11, 11.9, 12.8, 16.4], [11.1, 12, 12.9, 16.5], [11.2, 12.1, 13.1, 16.7], [11.3, 12.2, 13.2, 16.8], [11.4, 12.3, 13.3, 17], [11.5, 12.4, 13.4, 17.1], [11.6, 12.5, 13.5, 17.3], [11.7, 12.6, 13.6, 17.5], [11.8, 12.7, 13.7, 17.6], [11.9, 12.8, 13.9, 17.8], [12, 12.9, 14, 18], [12.1, 13, 14.1, 18.1], [12.2, 13.2, 14.2, 18.3], [12.3, 13.3, 14.4, 18.5], [12.4, 13.4, 14.5, 18.7], [12.5, 13.5, 14.6, 18.8], [12.6, 13.6, 14.8, 19], [12.7, 13.7, 14.9, 19.2], [12.8, 13.9, 15, 19.4], [12.9, 14, 15.2, 19.6], [13, 14.1, 15.3, 19.8], [13.2, 14.2, 15.4, 20], [13.3, 14.4, 15.6, 20.2], [13.4, 14.5, 15.7, 20.4], [13.5, 14.6, 15.9, 20.6], [13.6, 14.7, 16, 20.8], [13.7, 14.9, 16.2, 21], [13.8, 15, 16.3, 21.2], [14, 15.1, 16.5, 21.4], [14.1, 15.3, 16.6, 21.7], [14.2, 15.4, 16.8, 21.9]];
    var heightWeightTwoToFiveBoys = [[5.9, 6.3, 6.9, 8.8], [6, 6.4, 7, 8.9], [6.1, 6.5, 7.1, 9.1], [6.1, 6.6, 7.2, 9.2], [6.2, 6.7, 7.3, 9.4], [6.3, 6.8, 7.4, 9.5], [6.4, 6.9, 7.5, 9.6], [6.5, 7, 7.6, 9.8], [6.6, 7.1, 7.7, 9.9], [6.7, 7.2, 7.8, 10], [6.8, 7.3, 7.9, 10.2], [6.9, 7.4, 8, 10.3], [6.9, 7.5, 8.1, 10.4], [7, 7.6, 8.2, 10.6], [7.1, 7.7, 8.3, 10.7], [7.2, 7.8, 8.4, 10.8], [7.3, 7.9, 8.5, 11], [7.4, 7.9, 8.6, 11.1], [7.4, 8, 8.7, 11.2], [7.5, 8.1, 8.8, 11.3], [7.6, 8.2, 8.9, 11.4], [7.7, 8.3, 9, 11.6], [7.7, 8.4, 9.1, 11.7], [7.8, 8.5, 9.2, 11.8], [7.9, 8.5, 9.2, 11.9], [8, 8.6, 9.3, 12], [8, 8.7, 9.4, 12.1], [8.1, 8.8, 9.5, 12.2], [8.2, 8.8, 9.6, 12.3], [8.3, 8.9, 9.7, 12.4], [8.3, 9, 9.7, 12.6], [8.4, 9.1, 9.8, 12.7], [8.5, 9.2, 9.9, 12.8], [8.6, 9.3, 10, 12.9], [8.7, 9.3, 10.1, 13], [8.7, 9.4, 10.2, 13.1], [8.8, 9.5, 10.3, 13.3], [8.9, 9.6, 10.4, 13.4], [9, 9.7, 10.5, 13.5], [9.1, 9.9, 10.7, 13.7], [9.2, 10, 10.8, 13.8], [9.3, 10.1, 10.9, 13.9], [9.4, 10.2, 11, 14.1], [9.5, 10.3, 11.1, 14.2], [9.6, 10.4, 11.2, 14.4], [9.7, 10.5, 11.3, 14.5], [9.8, 10.6, 11.5, 14.7], [9.9, 10.7, 11.6, 14.8], [10, 10.8, 11.7, 14.9], [10.1, 10.9, 11.8, 15.1], [10.2, 11, 11.9, 15.2], [10.3, 11.1, 12, 15.3], [10.4, 11.2, 12.1, 15.5], [10.5, 11.3, 12.2, 15.6], [10.6, 11.4, 12.3, 15.8], [10.7, 11.5, 12.4, 15.9], [10.8, 11.6, 12.6, 16], [10.9, 11.7, 12.7, 16.2], [11, 11.8, 12.8, 16.3], [11.1, 11.9, 12.9, 16.5], [11.1, 12, 13, 16.6], [11.2, 12.1, 13.1, 16.7], [11.3, 12.2, 13.2, 16.9], [11.4, 12.3, 13.3, 17], [11.5, 12.4, 13.4, 17.2], [11.6, 12.5, 13.6, 17.4], [11.7, 12.6, 13.7, 17.5], [11.8, 12.8, 13.8, 17.7], [11.9, 12.9, 13.9, 17.9], [12, 13, 14, 18], [12.1, 13.1, 14.2, 18.2], [12.2, 13.2, 14.3, 18.4], [12.3, 13.3, 14.4, 18.5], [12.4, 13.4, 14.5, 18.7], [12.5, 13.6, 14.7, 18.9], [12.6, 13.7, 14.8, 19.1], [12.8, 13.8, 14.9, 19.3], [12.9, 13.9, 15.1, 19.5], [13, 14, 15.2, 19.7], [13.1, 14.2, 15.4, 19.9], [13.2, 14.3, 15.5, 20.1], [13.3, 14.4, 15.6, 20.3], [13.4, 14.5, 15.8, 20.5], [13.5, 14.7, 15.9, 20.7], [13.7, 14.8, 16.1, 20.9], [13.8, 14.9, 16.2, 21.1], [13.9, 15.1, 16.4, 21.3], [14, 15.2, 16.5, 21.5], [14.1, 15.3, 16.7, 21.8], [14.3, 15.5, 16.8, 22], [14.4, 15.6, 17, 22.2], [14.5, 15.8, 17.1, 22.4], [14.6, 15.9, 17.3, 22.7], [14.8, 16, 17.5, 22.9], [14.9, 16.2, 17.6, 23.1], [15, 16.3, 17.8, 23.4], [15.2, 16.5, 18, 23.6], [15.3, 16.6, 18.1, 23.9], [15.4, 16.8, 18.3, 24.1], [15.6, 16.9, 18.5, 24.4], [15.7, 17.1, 18.6, 24.6], [15.8, 17.2, 18.8, 24.9], [16, 17.4, 19, 25.1], [16.1, 17.5, 19.2, 25.4], [16.2, 17.7, 19.3, 25.6], [16.4, 17.9, 19.5, 25.9], [16.5, 18, 19.7, 26.1], [16.7, 18.2, 19.9, 26.4], [16.8, 18.3, 20, 26.6], [16.9, 18.5, 20.2, 26.9], [17.1, 18.6, 20.4, 27.2]];
    var heightWeightZeroToTwoGirls = [[1.9, 2.1, 2.3, 3], [2, 2.1, 2.3, 3.1], [2, 2.2, 2.4, 3.2], [2.1, 2.3, 2.5, 3.3], [2.2, 2.4, 2.6, 3.4], [2.2, 2.4, 2.6, 3.5], [2.3, 2.5, 2.7, 3.6], [2.4, 2.6, 2.8, 3.7], [2.4, 2.6, 2.9, 3.8], [2.5, 2.7, 3, 3.9], [2.6, 2.8, 3.1, 4], [2.7, 2.9, 3.2, 4.2], [2.8, 3, 3.3, 4.3], [2.8, 3.1, 3.4, 4.4], [2.9, 3.2, 3.5, 4.6], [3, 3.3, 3.6, 4.7], [3.1, 3.4, 3.7, 4.9], [3.2, 3.5, 3.8, 5], [3.3, 3.6, 3.9, 5.2], [3.4, 3.7, 4, 5.3], [3.5, 3.8, 4.2, 5.5], [3.6, 3.9, 4.3, 5.7], [3.7, 4, 4.4, 5.8], [3.8, 4.1, 4.5, 6], [3.9, 4.3, 4.6, 6.1], [4, 4.4, 4.8, 6.3], [4.1, 4.5, 4.9, 6.5], [4.2, 4.6, 5, 6.6], [4.3, 4.7, 5.1, 6.8], [4.4, 4.8, 5.3, 6.9], [4.5, 4.9, 5.4, 7.1], [4.6, 5, 5.5, 7.3], [4.7, 5.1, 5.6, 7.4], [4.8, 5.2, 5.7, 7.6], [4.9, 5.3, 5.8, 7.7], [5, 5.4, 5.9, 7.8], [5.1, 5.5, 6, 8], [5.2, 5.6, 6.2, 8.1], [5.3, 5.7, 6.3, 8.3], [5.4, 5.8, 6.4, 8.4], [5.5, 5.9, 6.5, 8.6], [5.5, 6, 6.6, 8.7], [5.6, 6.1, 6.7, 8.8], [5.7, 6.2, 6.8, 9], [5.8, 6.3, 6.9, 9.1], [5.9, 6.4, 7, 9.2], [6, 6.5, 7.1, 9.4], [6.1, 6.6, 7.2, 9.5], [6.1, 6.7, 7.3, 9.6], [6.2, 6.8, 7.4, 9.7], [6.3, 6.9, 7.5, 9.9], [6.4, 6.9, 7.6, 10], [6.5, 7, 7.7, 10.1], [6.5, 7.1, 7.7, 10.2], [6.6, 7.2, 7.8, 10.3], [6.7, 7.3, 7.9, 10.5], [6.8, 7.4, 8, 10.6], [6.9, 7.4, 8.1, 10.7], [6.9, 7.5, 8.2, 10.8], [7, 7.6, 8.3, 10.9], [7.1, 7.7, 8.4, 11], [7.1, 7.8, 8.5, 11.1], [7.2, 7.8, 8.5, 11.2], [7.3, 7.9, 8.6, 11.4], [7.4, 8, 8.7, 11.5], [7.4, 8.1, 8.8, 11.6], [7.5, 8.2, 8.9, 11.7], [7.6, 8.2, 9, 11.8], [7.7, 8.3, 9.1, 11.9], [7.7, 8.4, 9.1, 12], [7.8, 8.5, 9.2, 12.1], [7.9, 8.6, 9.3, 12.3], [8, 8.7, 9.4, 12.4], [8.1, 8.8, 9.5, 12.5], [8.1, 8.8, 9.6, 12.6], [8.2, 8.9, 9.7, 12.8], [8.3, 9, 9.8, 12.9], [8.4, 9.1, 9.9, 13.1], [8.5, 9.2, 10.1, 13.2], [8.6, 9.3, 10.2, 13.3], [8.7, 9.4, 10.3, 13.5], [8.8, 9.5, 10.4, 13.6], [8.9, 9.7, 10.5, 13.8], [9, 9.8, 10.6, 13.9], [9.1, 9.9, 10.7, 14.1], [9.2, 10, 10.9, 14.2], [9.3, 10.1, 11, 14.4], [9.4, 10.2, 11.1, 14.5], [9.5, 10.3, 11.2, 14.7], [9.6, 10.4, 11.3, 14.8], [9.7, 10.5, 11.4, 15], [9.8, 10.6, 11.5, 15.1], [9.9, 10.7, 11.7, 15.3], [10, 10.8, 11.8, 15.5], [10.1, 10.9, 11.9, 15.6], [10.1, 11, 12, 15.8], [10.2, 11.1, 12.1, 15.9], [10.3, 11.2, 12.2, 16.1], [10.4, 11.3, 12.3, 16.2], [10.5, 11.4, 12.4, 16.4], [10.6, 11.5, 12.6, 16.5], [10.7, 11.6, 12.7, 16.7], [10.8, 11.7, 12.8, 16.8], [10.9, 11.8, 12.9, 17], [11, 12, 13, 17.1], [11.1, 12.1, 13.1, 17.3], [11.2, 12.2, 13.3, 17.5], [11.3, 12.3, 13.4, 17.6], [11.4, 12.4, 13.5, 17.8], [11.5, 12.5, 13.6, 18], [11.6, 12.6, 13.7, 18.1], [11.7, 12.7, 13.9, 18.3], [11.8, 12.8, 14, 18.5], [11.9, 13, 14.1, 18.7], [12, 13.1, 14.3, 18.9], [12.1, 13.2, 14.4, 19], [12.3, 13.3, 14.5, 19.2], [12.4, 13.5, 14.7, 19.4], [12.5, 13.6, 14.8, 19.6], [12.6, 13.7, 15, 19.8], [12.7, 13.8, 15.1, 20], [12.8, 14, 15.3, 20.2], [13, 14.1, 15.4, 20.5], [13.1, 14.3, 15.6, 20.7], [13.2, 14.4, 15.7, 20.9], [13.3, 14.5, 15.9, 21.1], [13.5, 14.7, 16, 21.3], [13.6, 14.8, 16.2, 21.6], [13.7, 15, 16.4, 21.8], [13.9, 15.1, 16.5, 22], [14, 15.3, 16.7, 22.3]];
    var heightWightTwoToFiveGirls = [[5.6, 6.1, 6.6, 8.7], [5.7, 6.2, 6.7, 8.9], [5.8, 6.3, 6.8, 9], [5.8, 6.4, 6.9, 9.1], [5.9, 6.4, 7, 9.3], [6, 6.5, 7.1, 9.4], [6.1, 6.6, 7.2, 9.5], [6.2, 6.7, 7.3, 9.7], [6.3, 6.8, 7.4, 9.8], [6.3, 6.9, 7.5, 9.9], [6.4, 7, 7.6, 10], [6.5, 7.1, 7.7, 10.1], [6.6, 7.1, 7.8, 10.3], [6.7, 7.2, 7.9, 10.4], [6.7, 7.3, 8, 10.5], [6.8, 7.4, 8.1, 10.6], [6.9, 7.5, 8.1, 10.7], [7, 7.6, 8.2, 10.8], [7, 7.6, 8.3, 11], [7.1, 7.7, 8.4, 11.1], [7.2, 7.8, 8.5, 11.2], [7.2, 7.9, 8.6, 11.3], [7.3, 8, 8.7, 11.4], [7.4, 8, 8.7, 11.5], [7.5, 8.1, 8.8, 11.6], [7.5, 8.2, 8.9, 11.7], [7.6, 8.3, 9, 11.8], [7.7, 8.4, 9.1, 12], [7.8, 8.4, 9.2, 12.1], [7.8, 8.5, 9.3, 12.2], [7.9, 8.6, 9.4, 12.3], [8, 8.7, 9.5, 12.4], [8.1, 8.8, 9.6, 12.6], [8.2, 8.9, 9.7, 12.7], [8.3, 9, 9.8, 12.8], [8.4, 9.1, 9.9, 13], [8.5, 9.2, 10, 13.1], [8.5, 9.3, 10.1, 13.3], [8.6, 9.4, 10.2, 13.4], [8.7, 9.5, 10.3, 13.5], [8.8, 9.6, 10.4, 13.7], [8.9, 9.7, 10.6, 13.8], [9, 9.8, 10.7, 14], [9.1, 9.9, 10.8, 14.2], [9.2, 10, 10.9, 14.3], [9.3, 10.1, 11, 14.5], [9.4, 10.2, 11.1, 14.6], [9.5, 10.3, 11.2, 14.8], [9.6, 10.4, 11.4, 14.9], [9.7, 10.5, 11.5, 15.1], [9.8, 10.6, 11.6, 15.2], [9.9, 10.7, 11.7, 15.4], [10, 10.9, 11.8, 15.5], [10.1, 11, 11.9, 15.7], [10.2, 11.1, 12, 15.8], [10.3, 11.2, 12.1, 16], [10.4, 11.3, 12.3, 16.1], [10.5, 11.4, 12.4, 16.3], [10.6, 11.5, 12.5, 16.4], [10.7, 11.6, 12.6, 16.6], [10.8, 11.7, 12.7, 16.7], [10.8, 11.8, 12.8, 16.9], [10.9, 11.9, 12.9, 17], [11, 12, 13.1, 17.2], [11.1, 12.1, 13.2, 17.4], [11.2, 12.2, 13.3, 17.5], [11.3, 12.3, 13.4, 17.7], [11.4, 12.4, 13.5, 17.9], [11.5, 12.5, 13.7, 18], [11.6, 12.7, 13.8, 18.2], [11.7, 12.8, 13.9, 18.4], [11.9, 12.9, 14.1, 18.6], [12, 13, 14.2, 18.7], [12.1, 13.1, 14.3, 18.9], [12.2, 13.3, 14.5, 19.1], [12.3, 13.4, 14.6, 19.3], [12.4, 13.5, 14.7, 19.5], [12.5, 13.6, 14.9, 19.7], [12.6, 13.8, 15, 19.9], [12.8, 13.9, 15.2, 20.1], [12.9, 14, 15.3, 20.3], [13, 14.2, 15.5, 20.5], [13.1, 14.3, 15.6, 20.8], [13.3, 14.5, 15.8, 21], [13.4, 14.6, 15.9, 21.2], [13.5, 14.7, 16.1, 21.4], [13.7, 14.9, 16.3, 21.7], [13.8, 15, 16.4, 21.9], [13.9, 15.2, 16.6, 22.1], [14.1, 15.4, 16.8, 22.4], [14.2, 15.5, 17, 22.6], [14.4, 15.7, 17.1, 22.9], [14.5, 15.8, 17.3, 23.1], [14.7, 16, 17.5, 23.4], [14.8, 16.2, 17.7, 23.6], [15, 16.3, 17.9, 23.9], [15.1, 16.5, 18, 24.2], [15.3, 16.7, 18.2, 24.4], [15.4, 16.8, 18.4, 24.7], [15.6, 17, 18.6, 25], [15.7, 17.2, 18.8, 25.2], [15.9, 17.3, 19, 25.5], [16, 17.5, 19.2, 25.8], [16.2, 17.7, 19.4, 26.1], [16.3, 17.8, 19.6, 26.3], [16.5, 18, 19.8, 26.6], [16.6, 18.2, 19.9, 26.9], [16.8, 18.4, 20.1, 27.2], [16.9, 18.5, 20.3, 27.4], [17.1, 18.7, 20.5, 27.7], [17.3, 18.9, 20.7, 28]];

    var sds = {
        getHeightCategory: function (male, ageInMonths, height) {
            return getCategory(male ? heightBoysCategory : heightGirlsCategory, Math.round(ageInMonths), parseFloat(height));
        },
        getWeightCategory: function (male, ageInMonths, weight) {
            return getCategory(male ? weightBoysCategory : weightGirlsCategory, Math.round(ageInMonths), parseFloat(weight));
        },
        getHeightWeightCategory: function (male, ageInMonths, height, weight) {
            var heightRounded = Math.round(parseFloat(height) * 2) / 2;
            var index = Math.round((heightRounded - zeroToTwo[0]) / 0.5);
            var array = male ? heightWeightZeroToTwoBoys : heightWeightZeroToTwoGirls;
            if (ageInMonths > 24) {
                array = male ? heightWeightTwoToFiveBoys : heightWightTwoToFiveGirls;
                index = Math.round((heightRounded - twoToFive[0]) / 0.5);
            }

            console.log(male,ageInMonths,height,weight);
            return getCategory(array, index, parseFloat(weight));
        }
    }

    /**
     *
     * @param array array to check
     * @param age index of the sub array
     * @param value value to find
     * @returns {{index, code, name}|*}
     */
    var getCategory = function (array, age, value) {
        var row = array[age];
        var category = row.length;
        for (var i = 0; i < row.length; i++) {
            if (value < row[i]) {
                category = i;
                break;
            }
        }
        return categories[category];
    }
    return sds;
}

//tests : Use node to run the tests -> node SDCategoryService.js
try {
    if (process && process.argv) {
        console.log("Test started");
        var sdService = new SDCategoryService();

        var heightTests = [
            {
                male: true,
                age: 14,
                height: 80.4,
                expectedIndex: 3
            },
            {
                male: true,
                age: 21,
                height: 100,
                expectedIndex: 4
            },
            {
                male: true,
                age: 53,
                height: 50,
                expectedIndex: 0
            }
        ]
        heightTests.forEach(function (t) {
            var category = sdService.getHeightCategory(t.male, t.age, t.height);
            console.log(category.index == t.expectedIndex ? "Height Test Passed" : "Height Test Failed", category);
            console.log("\n");
        })

        var heightWeightTest = [
            {
                male: true,
                age: 14,
                height: 80.4,
                weight: 2,
                expectedIndex: 0
            },
            {
                male: true,
                age: 30,
                height: 102.3,
                weight: 17,
                expectedIndex: 3
            },
            {
                male: false,
                age: 3,
                height: 63,
                weight: 17,
                expectedIndex: 4
            },
            {
                male: false,
                age: 36,
                height: 78,
                weight: 9,
                expectedIndex: 3
            },
        ]

        heightWeightTest.forEach(function (t) {
            var category = sdService.getHeightWeightCategory(t.male, t.age, t.height, t.weight);
            console.log(category.index == t.expectedIndex ? "Height Weight Test Passed" : "Height Weight Test Failed", category);
            console.log("\n");
        })
    }
} catch (e) {
    console.log("Tests skipped");
}
